var EXAMPLE = (function() {

var demo2 = [{"x":0.5439999999999999,"y":2.24},{"x":0.5439999999999999,"y":2.2720000000000002},{"x":0.5760000000000001,"y":2.3040000000000003},{"x":0.6399999999999999,"y":2.368},{"x":0.704,"y":2.432},{"x":0.768,"y":2.496},{"x":0.8639999999999999,"y":2.56},{"x":0.992,"y":2.592},{"x":1.056,"y":2.656},{"x":1.1520000000000001,"y":2.688},{"x":1.248,"y":2.72},{"x":1.3119999999999998,"y":2.7520000000000002},{"x":1.376,"y":2.7520000000000002},{"x":1.44,"y":2.7520000000000002},{"x":1.504,"y":2.7520000000000002},{"x":1.5679999999999998,"y":2.7520000000000002},{"x":1.6,"y":2.7520000000000002},{"x":1.664,"y":2.688},{"x":1.6960000000000002,"y":2.592},{"x":1.76,"y":2.432},{"x":1.7919999999999998,"y":2.3040000000000003},{"x":1.7919999999999998,"y":2.176},{"x":1.7919999999999998,"y":2.048},{"x":1.7919999999999998,"y":1.984},{"x":1.7919999999999998,"y":1.856},{"x":1.7919999999999998,"y":1.728},{"x":1.6960000000000002,"y":1.6},{"x":1.6,"y":1.472},{"x":1.504,"y":1.312},{"x":1.344,"y":1.184},{"x":1.248,"y":0.992},{"x":1.1520000000000001,"y":0.896},{"x":1.056,"y":0.768},{"x":0.96,"y":0.64},{"x":0.8959999999999999,"y":0.544},{"x":0.832,"y":0.448},{"x":0.768,"y":0.384},{"x":0.704,"y":0.28800000000000003},{"x":0.672,"y":0.224},{"x":0.608,"y":0.192},{"x":0.5760000000000001,"y":0.128},{"x":0.512,"y":0.096},{"x":0.512,"y":0.064},{"x":0.48,"y":0},{"x":0.48,"y":0},{"x":0.512,"y":0},{"x":0.5439999999999999,"y":0},{"x":0.704,"y":0.032},{"x":0.832,"y":0.096},{"x":0.992,"y":0.128},{"x":1.1199999999999999,"y":0.192},{"x":1.2799999999999998,"y":0.192},{"x":1.344,"y":0.192},{"x":1.408,"y":0.224},{"x":1.472,"y":0.224},{"x":1.6960000000000002,"y":0.224},{"x":1.888,"y":0.192},{"x":1.952,"y":0.192},{"x":1.984,"y":0.16},{"x":2.016,"y":0.16},{"x":2.048,"y":0.16},{"x":2.08,"y":0.16},{"x":2.112,"y":0.16},{"x":2.112,"y":0.16},{"x":2.144,"y":0.16},{"x":2.1759999999999997,"y":0.16},{"x":2.208,"y":0.16},{"x":2.208,"y":0.16},{"x":2.2399999999999998,"y":0.16},{"x":2.272,"y":0.16},{"x":2.3040000000000003,"y":0.16}];
var demo3 = [{"x":0.672,"y":2.08},{"x":0.672,"y":2.112},{"x":0.672,"y":2.144},{"x":0.704,"y":2.2720000000000002},{"x":0.736,"y":2.336},{"x":0.8,"y":2.432},{"x":0.928,"y":2.496},{"x":0.992,"y":2.56},{"x":1.0879999999999999,"y":2.592},{"x":1.184,"y":2.624},{"x":1.248,"y":2.624},{"x":1.344,"y":2.624},{"x":1.408,"y":2.624},{"x":1.472,"y":2.624},{"x":1.504,"y":2.592},{"x":1.536,"y":2.528},{"x":1.5679999999999998,"y":2.464},{"x":1.5679999999999998,"y":2.4},{"x":1.6,"y":2.336},{"x":1.6,"y":2.2720000000000002},{"x":1.6319999999999997,"y":2.208},{"x":1.6319999999999997,"y":2.144},{"x":1.6319999999999997,"y":2.112},{"x":1.6319999999999997,"y":2.048},{"x":1.6319999999999997,"y":2.016},{"x":1.6319999999999997,"y":1.984},{"x":1.6319999999999997,"y":1.92},{"x":1.6319999999999997,"y":1.8880000000000001},{"x":1.5679999999999998,"y":1.824},{"x":1.504,"y":1.76},{"x":1.408,"y":1.728},{"x":1.344,"y":1.6640000000000001},{"x":1.2799999999999998,"y":1.6320000000000001},{"x":1.248,"y":1.6},{"x":1.216,"y":1.568},{"x":1.184,"y":1.568},{"x":1.184,"y":1.536},{"x":1.184,"y":1.504},{"x":1.248,"y":1.504},{"x":1.344,"y":1.536},{"x":1.44,"y":1.536},{"x":1.6,"y":1.536},{"x":1.6960000000000002,"y":1.536},{"x":1.8239999999999998,"y":1.536},{"x":1.888,"y":1.536},{"x":1.92,"y":1.536},{"x":1.984,"y":1.472},{"x":1.984,"y":1.3760000000000001},{"x":2.016,"y":1.28},{"x":2.048,"y":1.1520000000000001},{"x":2.08,"y":1.024},{"x":2.08,"y":0.928},{"x":2.08,"y":0.768},{"x":2.08,"y":0.672},{"x":2.016,"y":0.41600000000000004},{"x":1.984,"y":0.352},{"x":1.8239999999999998,"y":0.256},{"x":1.7279999999999998,"y":0.224},{"x":1.6,"y":0.192},{"x":1.504,"y":0.192},{"x":1.344,"y":0.192},{"x":1.248,"y":0.192},{"x":1.1520000000000001,"y":0.192},{"x":1.0879999999999999,"y":0.192},{"x":0.992,"y":0.192},{"x":0.928,"y":0.192},{"x":0.8639999999999999,"y":0.224},{"x":0.8,"y":0.224},{"x":0.736,"y":0.28800000000000003},{"x":0.704,"y":0.32},{"x":0.672,"y":0.32},{"x":0.6399999999999999,"y":0.352},{"x":0.608,"y":0.384},{"x":0.5760000000000001,"y":0.41600000000000004},{"x":0.5439999999999999,"y":0.448},{"x":0.5439999999999999,"y":0.48}];
var demoS = [{"x":2.2399999999999998,"y":2.016},{"x":2.272,"y":2.048},{"x":2.272,"y":2.112},{"x":2.208,"y":2.176},{"x":2.1759999999999997,"y":2.2720000000000002},{"x":2.112,"y":2.336},{"x":2.08,"y":2.4},{"x":2.016,"y":2.464},{"x":1.952,"y":2.496},{"x":1.888,"y":2.528},{"x":1.856,"y":2.56},{"x":1.7279999999999998,"y":2.624},{"x":1.664,"y":2.656},{"x":1.6,"y":2.656},{"x":1.536,"y":2.656},{"x":1.504,"y":2.656},{"x":1.472,"y":2.656},{"x":1.44,"y":2.656},{"x":1.376,"y":2.656},{"x":1.344,"y":2.656},{"x":1.2799999999999998,"y":2.656},{"x":1.248,"y":2.656},{"x":1.184,"y":2.656},{"x":1.1520000000000001,"y":2.624},{"x":1.1199999999999999,"y":2.592},{"x":1.056,"y":2.56},{"x":1.024,"y":2.528},{"x":0.992,"y":2.496},{"x":0.992,"y":2.464},{"x":0.96,"y":2.432},{"x":0.96,"y":2.368},{"x":0.928,"y":2.3040000000000003},{"x":0.928,"y":2.2720000000000002},{"x":0.928,"y":2.208},{"x":0.8959999999999999,"y":2.112},{"x":0.8959999999999999,"y":2.048},{"x":0.8959999999999999,"y":1.984},{"x":0.8959999999999999,"y":1.984},{"x":0.8959999999999999,"y":1.952},{"x":0.8959999999999999,"y":1.92},{"x":0.928,"y":1.8880000000000001},{"x":0.96,"y":1.856},{"x":0.992,"y":1.824},{"x":1.056,"y":1.792},{"x":1.0879999999999999,"y":1.76},{"x":1.1199999999999999,"y":1.76},{"x":1.1520000000000001,"y":1.728},{"x":1.184,"y":1.696},{"x":1.216,"y":1.696},{"x":1.248,"y":1.696},{"x":1.2799999999999998,"y":1.6640000000000001},{"x":1.344,"y":1.6640000000000001},{"x":1.376,"y":1.6640000000000001},{"x":1.44,"y":1.6640000000000001},{"x":1.504,"y":1.6640000000000001},{"x":1.536,"y":1.6640000000000001},{"x":1.5679999999999998,"y":1.6640000000000001},{"x":1.6319999999999997,"y":1.6640000000000001},{"x":1.664,"y":1.6320000000000001},{"x":1.6960000000000002,"y":1.6320000000000001},{"x":1.7279999999999998,"y":1.6},{"x":1.7919999999999998,"y":1.6},{"x":1.856,"y":1.536},{"x":1.888,"y":1.504},{"x":1.952,"y":1.3760000000000001},{"x":1.984,"y":1.312},{"x":2.048,"y":1.184},{"x":2.08,"y":1.088},{"x":2.112,"y":0.992},{"x":2.144,"y":0.864},{"x":2.144,"y":0.608},{"x":2.112,"y":0.512},{"x":2.08,"y":0.448},{"x":1.984,"y":0.32},{"x":1.952,"y":0.256},{"x":1.888,"y":0.224},{"x":1.856,"y":0.128},{"x":1.7919999999999998,"y":0.096},{"x":1.7279999999999998,"y":0.096},{"x":1.664,"y":0.064},{"x":1.5679999999999998,"y":0.032},{"x":1.472,"y":0.032},{"x":1.44,"y":0.032},{"x":1.376,"y":0.032},{"x":1.3119999999999998,"y":0.032},{"x":1.248,"y":0.032},{"x":1.184,"y":0.032},{"x":1.1199999999999999,"y":0.032},{"x":1.024,"y":0.032},{"x":0.96,"y":0.064},{"x":0.8959999999999999,"y":0.096},{"x":0.768,"y":0.16},{"x":0.704,"y":0.256},{"x":0.6399999999999999,"y":0.352},{"x":0.5760000000000001,"y":0.41600000000000004},{"x":0.512,"y":0.512},{"x":0.48,"y":0.608},{"x":0.44799999999999995,"y":0.704},{"x":0.44799999999999995,"y":0.768},{"x":0.416,"y":0.864},{"x":0.416,"y":0.896},{"x":0.416,"y":0.928},{"x":0.416,"y":0.96},{"x":0.416,"y":0.992}];
var demoN = [{"x":0.5439999999999999,"y":0.256},{"x":0.5439999999999999,"y":0.352},{"x":0.5439999999999999,"y":0.512},{"x":0.5439999999999999,"y":0.64},{"x":0.5439999999999999,"y":0.8320000000000001},{"x":0.5439999999999999,"y":1.056},{"x":0.5439999999999999,"y":1.248},{"x":0.5439999999999999,"y":1.3760000000000001},{"x":0.5439999999999999,"y":1.536},{"x":0.5439999999999999,"y":1.6640000000000001},{"x":0.5439999999999999,"y":1.792},{"x":0.5439999999999999,"y":1.8880000000000001},{"x":0.5439999999999999,"y":1.984},{"x":0.5439999999999999,"y":2.08},{"x":0.5439999999999999,"y":2.144},{"x":0.5439999999999999,"y":2.208},{"x":0.5439999999999999,"y":2.336},{"x":0.5439999999999999,"y":2.368},{"x":0.5439999999999999,"y":2.4},{"x":0.5439999999999999,"y":2.432},{"x":0.5439999999999999,"y":2.464},{"x":0.5439999999999999,"y":2.496},{"x":0.5439999999999999,"y":2.528},{"x":0.5439999999999999,"y":2.56},{"x":0.5439999999999999,"y":2.592},{"x":0.5439999999999999,"y":2.624},{"x":0.5439999999999999,"y":2.688},{"x":0.5439999999999999,"y":2.72},{"x":0.5439999999999999,"y":2.688},{"x":0.5760000000000001,"y":2.688},{"x":0.608,"y":2.624},{"x":0.704,"y":2.464},{"x":0.8,"y":2.2720000000000002},{"x":0.8959999999999999,"y":2.08},{"x":1.056,"y":1.856},{"x":1.1520000000000001,"y":1.728},{"x":1.216,"y":1.6320000000000001},{"x":1.2799999999999998,"y":1.504},{"x":1.376,"y":1.408},{"x":1.44,"y":1.312},{"x":1.536,"y":1.184},{"x":1.6,"y":1.088},{"x":1.6319999999999997,"y":0.96},{"x":1.7279999999999998,"y":0.864},{"x":1.7919999999999998,"y":0.768},{"x":1.856,"y":0.672},{"x":1.92,"y":0.5760000000000001},{"x":1.952,"y":0.512},{"x":1.984,"y":0.448},{"x":1.984,"y":0.41600000000000004},{"x":2.016,"y":0.384},{"x":2.048,"y":0.384},{"x":2.048,"y":0.352},{"x":2.08,"y":0.32},{"x":2.144,"y":0.28800000000000003},{"x":2.1759999999999997,"y":0.28800000000000003},{"x":2.1759999999999997,"y":0.256},{"x":2.2399999999999998,"y":0.256},{"x":2.2399999999999998,"y":0.224},{"x":2.272,"y":0.224},{"x":2.272,"y":0.192},{"x":2.3040000000000003,"y":0.192},{"x":2.3040000000000003,"y":0.16},{"x":2.336,"y":0.16},{"x":2.368,"y":0.16},{"x":2.368,"y":0.128},{"x":2.368,"y":0.16},{"x":2.368,"y":0.192},{"x":2.368,"y":0.32},{"x":2.368,"y":0.512},{"x":2.368,"y":0.672},{"x":2.368,"y":0.864},{"x":2.368,"y":1.12},{"x":2.336,"y":1.248},{"x":2.336,"y":1.408},{"x":2.336,"y":1.568},{"x":2.336,"y":1.728},{"x":2.3040000000000003,"y":1.824},{"x":2.3040000000000003,"y":1.92},{"x":2.3040000000000003,"y":2.016},{"x":2.3040000000000003,"y":2.048},{"x":2.3040000000000003,"y":2.112},{"x":2.3040000000000003,"y":2.176},{"x":2.3040000000000003,"y":2.208},{"x":2.272,"y":2.2720000000000002},{"x":2.272,"y":2.336},{"x":2.272,"y":2.4},{"x":2.272,"y":2.464},{"x":2.272,"y":2.528},{"x":2.272,"y":2.592},{"x":2.272,"y":2.624},{"x":2.272,"y":2.656},{"x":2.272,"y":2.688},{"x":2.272,"y":2.72}];
var demo7 = [{"x":0.44799999999999995,"y":2.688},{"x":0.512,"y":2.688},{"x":0.672,"y":2.688},{"x":1.1520000000000001,"y":2.688},{"x":1.2799999999999998,"y":2.688},{"x":1.44,"y":2.688},{"x":1.5679999999999998,"y":2.688},{"x":1.664,"y":2.688},{"x":1.76,"y":2.688},{"x":1.7919999999999998,"y":2.688},{"x":1.856,"y":2.688},{"x":1.984,"y":2.688},{"x":2.048,"y":2.688},{"x":2.08,"y":2.688},{"x":2.112,"y":2.688},{"x":2.144,"y":2.688},{"x":2.144,"y":2.688},{"x":2.1759999999999997,"y":2.688},{"x":2.208,"y":2.688},{"x":2.2399999999999998,"y":2.688},{"x":2.272,"y":2.688},{"x":2.3040000000000003,"y":2.688},{"x":2.336,"y":2.688},{"x":2.368,"y":2.688},{"x":2.368,"y":2.688},{"x":2.4,"y":2.688},{"x":2.4,"y":2.656},{"x":2.368,"y":2.624},{"x":2.336,"y":2.592},{"x":2.2399999999999998,"y":2.528},{"x":2.144,"y":2.4},{"x":2.048,"y":2.3040000000000003},{"x":1.888,"y":2.176},{"x":1.7919999999999998,"y":2.08},{"x":1.664,"y":1.984},{"x":1.5679999999999998,"y":1.8880000000000001},{"x":1.472,"y":1.76},{"x":1.376,"y":1.6},{"x":1.2799999999999998,"y":1.44},{"x":1.184,"y":1.28},{"x":1.1199999999999999,"y":1.12},{"x":1.024,"y":0.992},{"x":0.992,"y":0.928},{"x":0.928,"y":0.768},{"x":0.8639999999999999,"y":0.704},{"x":0.8,"y":0.64},{"x":0.768,"y":0.5760000000000001},{"x":0.736,"y":0.512},{"x":0.736,"y":0.448},{"x":0.704,"y":0.352},{"x":0.704,"y":0.352},{"x":0.672,"y":0.352},{"x":0.672,"y":0.32},{"x":0.672,"y":0.28800000000000003}];
var demo5 = [{"x":1.984,"y":2.688},{"x":1.952,"y":2.688},{"x":1.92,"y":2.688},{"x":1.8239999999999998,"y":2.688},{"x":1.6960000000000002,"y":2.688},{"x":1.5679999999999998,"y":2.688},{"x":1.376,"y":2.688},{"x":1.248,"y":2.688},{"x":1.1520000000000001,"y":2.688},{"x":1.056,"y":2.688},{"x":0.96,"y":2.688},{"x":0.8959999999999999,"y":2.688},{"x":0.832,"y":2.688},{"x":0.768,"y":2.688},{"x":0.736,"y":2.688},{"x":0.704,"y":2.688},{"x":0.672,"y":2.688},{"x":0.6399999999999999,"y":2.688},{"x":0.6399999999999999,"y":2.656},{"x":0.6399999999999999,"y":2.624},{"x":0.6399999999999999,"y":2.624},{"x":0.672,"y":2.624},{"x":0.672,"y":2.592},{"x":0.672,"y":2.56},{"x":0.672,"y":2.528},{"x":0.672,"y":2.464},{"x":0.672,"y":2.368},{"x":0.672,"y":2.24},{"x":0.704,"y":2.144},{"x":0.704,"y":1.984},{"x":0.736,"y":1.8880000000000001},{"x":0.736,"y":1.792},{"x":0.736,"y":1.728},{"x":0.736,"y":1.6320000000000001},{"x":0.736,"y":1.568},{"x":0.736,"y":1.536},{"x":0.736,"y":1.536},{"x":0.736,"y":1.504},{"x":0.768,"y":1.504},{"x":0.8,"y":1.536},{"x":0.8639999999999999,"y":1.6},{"x":0.8959999999999999,"y":1.6},{"x":0.96,"y":1.696},{"x":1.056,"y":1.728},{"x":1.1520000000000001,"y":1.76},{"x":1.2799999999999998,"y":1.792},{"x":1.344,"y":1.792},{"x":1.408,"y":1.792},{"x":1.44,"y":1.792},{"x":1.472,"y":1.792},{"x":1.536,"y":1.792},{"x":1.6,"y":1.792},{"x":1.6319999999999997,"y":1.76},{"x":1.6960000000000002,"y":1.728},{"x":1.7279999999999998,"y":1.696},{"x":1.7919999999999998,"y":1.6320000000000001},{"x":1.8239999999999998,"y":1.6},{"x":1.856,"y":1.536},{"x":1.888,"y":1.472},{"x":1.92,"y":1.408},{"x":1.952,"y":1.3760000000000001},{"x":1.952,"y":1.344},{"x":1.952,"y":1.28},{"x":1.952,"y":1.216},{"x":1.952,"y":1.1520000000000001},{"x":1.952,"y":1.024},{"x":1.92,"y":0.928},{"x":1.888,"y":0.864},{"x":1.856,"y":0.768},{"x":1.7919999999999998,"y":0.736},{"x":1.76,"y":0.672},{"x":1.6960000000000002,"y":0.608},{"x":1.6,"y":0.48},{"x":1.536,"y":0.448},{"x":1.376,"y":0.352},{"x":1.2799999999999998,"y":0.32},{"x":1.184,"y":0.28800000000000003},{"x":1.1199999999999999,"y":0.256},{"x":1.024,"y":0.256},{"x":0.96,"y":0.256},{"x":0.8639999999999999,"y":0.256},{"x":0.8,"y":0.256},{"x":0.768,"y":0.256},{"x":0.672,"y":0.256},{"x":0.6399999999999999,"y":0.256},{"x":0.608,"y":0.28800000000000003},{"x":0.5760000000000001,"y":0.28800000000000003},{"x":0.5760000000000001,"y":0.352},{"x":0.5439999999999999,"y":0.384},{"x":0.5439999999999999,"y":0.41600000000000004},{"x":0.512,"y":0.448},{"x":0.512,"y":0.48},{"x":0.48,"y":0.48},{"x":0.48,"y":0.512},{"x":0.44799999999999995,"y":0.512},{"x":0.44799999999999995,"y":0.544}];
var demoE = [{"x":1.856,"y":2.72},{"x":1.8239999999999998,"y":2.72},{"x":1.7919999999999998,"y":2.72},{"x":1.6319999999999997,"y":2.72},{"x":1.408,"y":2.72},{"x":1.216,"y":2.72},{"x":0.992,"y":2.72},{"x":0.832,"y":2.72},{"x":0.6399999999999999,"y":2.624},{"x":0.5439999999999999,"y":2.528},{"x":0.44799999999999995,"y":2.368},{"x":0.384,"y":2.2720000000000002},{"x":0.352,"y":2.112},{"x":0.31999999999999995,"y":2.048},{"x":0.31999999999999995,"y":2.016},{"x":0.31999999999999995,"y":1.984},{"x":0.31999999999999995,"y":1.92},{"x":0.416,"y":1.8880000000000001},{"x":0.5439999999999999,"y":1.824},{"x":0.736,"y":1.792},{"x":0.8639999999999999,"y":1.728},{"x":1.024,"y":1.728},{"x":1.1199999999999999,"y":1.728},{"x":1.184,"y":1.728},{"x":1.216,"y":1.728},{"x":1.248,"y":1.728},{"x":1.2799999999999998,"y":1.728},{"x":1.3119999999999998,"y":1.728},{"x":1.3119999999999998,"y":1.76},{"x":1.344,"y":1.76},{"x":1.376,"y":1.792},{"x":1.344,"y":1.792},{"x":1.2799999999999998,"y":1.792},{"x":1.184,"y":1.792},{"x":1.056,"y":1.76},{"x":0.928,"y":1.696},{"x":0.832,"y":1.6320000000000001},{"x":0.768,"y":1.568},{"x":0.672,"y":1.504},{"x":0.5760000000000001,"y":1.408},{"x":0.512,"y":1.344},{"x":0.44799999999999995,"y":1.248},{"x":0.44799999999999995,"y":1.1520000000000001},{"x":0.44799999999999995,"y":1.024},{"x":0.44799999999999995,"y":0.896},{"x":0.44799999999999995,"y":0.8},{"x":0.44799999999999995,"y":0.704},{"x":0.44799999999999995,"y":0.5760000000000001},{"x":0.48,"y":0.512},{"x":0.512,"y":0.41600000000000004},{"x":0.6399999999999999,"y":0.352},{"x":0.672,"y":0.32},{"x":0.768,"y":0.256},{"x":0.8639999999999999,"y":0.256},{"x":0.96,"y":0.224},{"x":1.0879999999999999,"y":0.192},{"x":1.216,"y":0.192},{"x":1.408,"y":0.192},{"x":1.504,"y":0.192},{"x":1.6319999999999997,"y":0.192},{"x":1.76,"y":0.192},{"x":1.8239999999999998,"y":0.224},{"x":1.952,"y":0.32},{"x":2.016,"y":0.352},{"x":2.08,"y":0.384},{"x":2.144,"y":0.41600000000000004},{"x":2.208,"y":0.41600000000000004}];
var demoW = [{"x":0.352,"y":2.496},{"x":0.352,"y":2.432},{"x":0.352,"y":2.336},{"x":0.352,"y":2.144},{"x":0.352,"y":1.824},{"x":0.352,"y":1.6},{"x":0.384,"y":1.3760000000000001},{"x":0.416,"y":1.184},{"x":0.512,"y":0.96},{"x":0.5439999999999999,"y":0.8},{"x":0.5760000000000001,"y":0.64},{"x":0.672,"y":0.48},{"x":0.672,"y":0.41600000000000004},{"x":0.672,"y":0.384},{"x":0.672,"y":0.41600000000000004},{"x":0.672,"y":0.448},{"x":0.704,"y":0.608},{"x":0.768,"y":0.768},{"x":0.832,"y":0.928},{"x":0.96,"y":1.12},{"x":1.056,"y":1.28},{"x":1.1199999999999999,"y":1.44},{"x":1.216,"y":1.568},{"x":1.2799999999999998,"y":1.6320000000000001},{"x":1.3119999999999998,"y":1.696},{"x":1.344,"y":1.696},{"x":1.344,"y":1.6},{"x":1.376,"y":1.504},{"x":1.44,"y":1.312},{"x":1.504,"y":1.1520000000000001},{"x":1.6,"y":0.96},{"x":1.6319999999999997,"y":0.864},{"x":1.7279999999999998,"y":0.736},{"x":1.76,"y":0.672},{"x":1.76,"y":0.608},{"x":1.7919999999999998,"y":0.5760000000000001},{"x":1.8239999999999998,"y":0.5760000000000001},{"x":1.8239999999999998,"y":0.544},{"x":1.856,"y":0.544},{"x":1.856,"y":0.512},{"x":1.888,"y":0.512},{"x":1.888,"y":0.48},{"x":1.888,"y":0.48},{"x":1.888,"y":0.448},{"x":1.92,"y":0.448},{"x":1.92,"y":0.512},{"x":1.952,"y":0.608},{"x":1.984,"y":0.736},{"x":2.048,"y":0.928},{"x":2.08,"y":1.056},{"x":2.112,"y":1.184},{"x":2.144,"y":1.344},{"x":2.1759999999999997,"y":1.504},{"x":2.208,"y":1.6320000000000001},{"x":2.272,"y":1.76},{"x":2.3040000000000003,"y":1.92},{"x":2.336,"y":2.016},{"x":2.368,"y":2.08},{"x":2.368,"y":2.144},{"x":2.4,"y":2.208},{"x":2.4,"y":2.2720000000000002},{"x":2.432,"y":2.3040000000000003},{"x":2.432,"y":2.336},{"x":2.432,"y":2.4},{"x":2.432,"y":2.432},{"x":2.464,"y":2.432},{"x":2.464,"y":2.464},{"x":2.464,"y":2.496},{"x":2.464,"y":2.528}];
var demoO = [{"x":1.44,"y":2.624},{"x":1.408,"y":2.624},{"x":1.344,"y":2.624},{"x":1.2799999999999998,"y":2.624},{"x":1.1520000000000001,"y":2.624},{"x":1.056,"y":2.528},{"x":0.96,"y":2.464},{"x":0.8639999999999999,"y":2.4},{"x":0.8,"y":2.336},{"x":0.768,"y":2.3040000000000003},{"x":0.704,"y":2.24},{"x":0.672,"y":2.208},{"x":0.5760000000000001,"y":2.144},{"x":0.5439999999999999,"y":2.08},{"x":0.512,"y":2.016},{"x":0.48,"y":1.984},{"x":0.48,"y":1.92},{"x":0.416,"y":1.728},{"x":0.416,"y":1.696},{"x":0.416,"y":1.6640000000000001},{"x":0.416,"y":1.6320000000000001},{"x":0.416,"y":1.568},{"x":0.416,"y":1.504},{"x":0.416,"y":1.408},{"x":0.416,"y":1.3760000000000001},{"x":0.416,"y":1.344},{"x":0.416,"y":1.28},{"x":0.416,"y":1.216},{"x":0.416,"y":1.184},{"x":0.44799999999999995,"y":1.1520000000000001},{"x":0.48,"y":1.088},{"x":0.48,"y":1.024},{"x":0.512,"y":0.96},{"x":0.5439999999999999,"y":0.928},{"x":0.5439999999999999,"y":0.896},{"x":0.5760000000000001,"y":0.864},{"x":0.608,"y":0.8},{"x":0.6399999999999999,"y":0.736},{"x":0.672,"y":0.736},{"x":0.704,"y":0.704},{"x":0.736,"y":0.672},{"x":0.768,"y":0.608},{"x":0.8,"y":0.5760000000000001},{"x":0.8639999999999999,"y":0.544},{"x":0.8959999999999999,"y":0.512},{"x":0.8959999999999999,"y":0.48},{"x":0.96,"y":0.48},{"x":0.992,"y":0.48},{"x":1.024,"y":0.48},{"x":1.056,"y":0.48},{"x":1.056,"y":0.448},{"x":1.1199999999999999,"y":0.448},{"x":1.1520000000000001,"y":0.448},{"x":1.184,"y":0.41600000000000004},{"x":1.248,"y":0.41600000000000004},{"x":1.2799999999999998,"y":0.384},{"x":1.3119999999999998,"y":0.384},{"x":1.344,"y":0.384},{"x":1.376,"y":0.384},{"x":1.408,"y":0.384},{"x":1.44,"y":0.384},{"x":1.536,"y":0.384},{"x":1.6,"y":0.384},{"x":1.664,"y":0.384},{"x":1.7279999999999998,"y":0.384},{"x":1.76,"y":0.384},{"x":1.7919999999999998,"y":0.41600000000000004},{"x":1.856,"y":0.448},{"x":1.888,"y":0.48},{"x":1.92,"y":0.512},{"x":1.952,"y":0.608},{"x":1.984,"y":0.64},{"x":2.08,"y":0.672},{"x":2.144,"y":0.8},{"x":2.144,"y":0.8320000000000001},{"x":2.1759999999999997,"y":0.896},{"x":2.208,"y":0.928},{"x":2.2399999999999998,"y":0.992},{"x":2.272,"y":1.088},{"x":2.272,"y":1.1520000000000001},{"x":2.3040000000000003,"y":1.312},{"x":2.3040000000000003,"y":1.44},{"x":2.336,"y":1.536},{"x":2.336,"y":1.6},{"x":2.336,"y":1.6640000000000001},{"x":2.336,"y":1.728},{"x":2.336,"y":1.76},{"x":2.336,"y":1.824},{"x":2.336,"y":1.856},{"x":2.3040000000000003,"y":1.92},{"x":2.272,"y":1.92},{"x":2.2399999999999998,"y":1.984},{"x":2.2399999999999998,"y":2.016},{"x":2.2399999999999998,"y":2.048},{"x":2.208,"y":2.08},{"x":2.1759999999999997,"y":2.112},{"x":2.144,"y":2.176},{"x":2.08,"y":2.208},{"x":2.08,"y":2.2720000000000002},{"x":2.016,"y":2.3040000000000003},{"x":2.016,"y":2.336},{"x":1.952,"y":2.368},{"x":1.952,"y":2.4},{"x":1.92,"y":2.432},{"x":1.888,"y":2.432},{"x":1.856,"y":2.464},{"x":1.856,"y":2.496},{"x":1.8239999999999998,"y":2.496},{"x":1.8239999999999998,"y":2.528},{"x":1.7919999999999998,"y":2.528},{"x":1.7919999999999998,"y":2.528},{"x":1.76,"y":2.528}];

var demoList = [demo2, demo3, demoS, demoN, demo7, demo5, demoE, demoW, demoO];


var vis = d3.select('#example');
var grail = new Grail();
grail.SetThinningThreshold(0.2);
grail.SetStrokeMode("single");


grail.SetCharacterCallback(OnCharacter);


function OnCharacter(character, justifications) {
	console.log("You printed a " + character);
}


function onClear()
{
  grail.Init();
  update();
}


function clearVis() {
  vis.selectAll(".thinned_contour_points").data(grail.ThinnedCurvature()).remove();
  vis.selectAll(".corners").data(grail.CornerData()).remove();
}


var canvasWidth = 90;
var canvasHeight = 90;
var MARGINS = {top: 20, right: 20, bottom: 20, left: 20};

plotWidth = canvasWidth - MARGINS.left - MARGINS.right,
plotHeight = canvasHeight - MARGINS.top - MARGINS.bottom;

var xRange = d3.scale.linear().range([MARGINS.left, plotWidth]);
var yRange = d3.scale.linear().range([plotHeight, MARGINS.top]);

xRange.domain([0, 3]);
yRange.domain([0, 3]);


var connect_the_dots = d3.svg.line()
  .x(function(d) { return xRange(d.x); })
  .y(function(d) { return yRange(d.y); })
  .interpolate("linear");


var thinned_path = vis.append("path")
  .attr("stroke", "black")
  .attr("stroke-width", 2)
  .style("stroke-opacity", 0.8)
  .attr("fill", "none");

var mouse_down_symbol = vis.append("path")
  .attr("fill", "rgb(71, 157, 174)")
  .attr("stroke", "rgb(71, 157, 174)")
  .attr("stroke-width", 2)
  .style("opacity", 0)
  .attr("d", d3.svg.symbol().type("circle").size(25));

var mouse_up_symbol = vis.append("path")
  .attr("fill", "rgb(71, 157, 174)")
  .attr("stroke", "rgb(71, 157, 174)")
  .attr("stroke-width", 2)
  .style("opacity", 0)
  .attr("d", d3.svg.symbol().type("square").size(25));


function update()
{
  // var thinned_contour_points = vis.selectAll(".thinned_contour_points")
  //   .data(grail.ThinnedCurvature());

  // thinned_contour_points.enter().append("path")
  //     .attr("class", "thinned_contour_points")
  //     .attr("fill", "black")
  //     .attr("stroke", "black")
  //     .attr("d", d3.svg.symbol().type("triangle-up").size(14))
  //     .attr("transform", function(d) {
  //       var rotation = 0;
  //       if (d.dir == "right") { rotation = 90; }
  //       if (d.dir == "down") { rotation = 180; }
  //       if (d.dir == "left") { rotation = 270; }
  //       return "translate(" + xRange(d.point.x) + "," + yRange(d.point.y) + ") " + 
  //              "rotate(" + rotation + ") " + 
  //              "scale(1, 1.5)"; 
  //       })
  //     .style("opacity", 0)
  //     .transition().duration(200).style("opacity", 1);;

  // thinned_contour_points.exit().remove();

  thinned_path
      .attr("d", connect_the_dots(grail.ThinnedData()));

  // var corner_points = vis.selectAll(".corners").data(grail.CornerData());

  // corner_points.enter().append("path")
  //     .attr("class", "corners")
  //     .attr("fill", "deeppink")
  //     .attr("stroke", "deeppink")
  //     .attr("d", d3.svg.symbol().type("cross").size(25))
  //     .attr("transform", function(d) {
  //       return "translate(" + xRange(d.x) + "," + yRange(d.y) + ")"; 
  //       })
  //     .style("opacity", 0)
  //     .transition().duration(200).style("opacity", 1);;

  // corner_points.exit().remove();
}

var currentDemo = 0;
var currentIndex = 0;

function feed() {
  var demo = demoList[currentDemo];

  if (currentIndex == 0)
  {
    grail.OnPenDown(demo[currentIndex]);

    mouse_down_symbol
      .style("opacity", 0)
      .attr("transform", function() {
        d = grail.PenDownPos();
        return "translate(" + xRange(d.x) + "," + yRange(d.y) + ")";});
    mouse_up_symbol
      .style("opacity", 0);
  }
  else if (currentIndex < demo.length - 1)
  {
    grail.OnPenMove(demo[currentIndex]);
  }
  else if (currentIndex == demo.length - 1)
  {
    grail.OnPenUp(demo[currentIndex]);
    mouse_up_symbol
      .style("opacity", 0)
      .attr("transform", function() {
        d = grail.PenUpPos();
        return "translate(" + xRange(d.x) + "," + yRange(d.y) + ")";});
  } else if (currentIndex > demo.length * 3) {
    currentIndex = 0;
    currentDemo++;
    if (currentDemo == demoList.length)
    {
      currentDemo = 0;
    }
    onClear();

    return;
  }

  update();
  currentIndex++;
}

setInterval(feed, 10);

}) ();



